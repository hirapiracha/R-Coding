---
title: "Data Report 3"
author: "<fill-in>"
---

::: {layout-ncol=2}
# Acknowledgement on use of outside sources

**Note:** Remove this note, but include this Disclaimer section in the report.

**Note:** Keep one of the following sentences in the report (this is for help received from other students or people - ChatGPT, see below):

## List of Outside Sources Used for Assignment

For this report I used the following outside sources (including discussions with other people, in which case please provide their name):

I highlight in the code via comments which parts of the code benefitted from which source; and for text in the report, I highlight this via the use of footnotes.[^1]

[^1]: Like this via a sentence such as "This paragraph was generated by ChatGPT via the prompt '...'".

For comments in code:

```{r example-comment}
#| eval: false
# For single functions or code lines, a short comment is enough

df <- bind_rows(df1, df2)   # Tatiana (not in the class) told me about `bind_rows`.

# For larger parts of code, more is needed
p1 <- ggplot(...) +
  # The theming code for this plot was generated by ChatGPT with some edits by me.
  ...
```

## Acknowledgement of the Rules of the Game

I labeled every part of the text and the code that I got by copying (and potentially editing) answers from StackOverflow, ChatGPT (or similar AIs), other websites providing code, including online forums, or from other students. For any piece of code longer than one line, I provide the source -- e.g., the link for StackOverflow or other online forums; the prompt/screenshot used for ChatGPT; similar for others. Moreover, whenever using external code, I made sure that I at least broadly understand how it works, and include that in the comment.

I understand that I can use arbitrary code that I find online or by discussing with others, as long as I label it correctly (see above), and I understand or tested it well enough to be sure that the code does what I wanted. Using code from other sources can however lead to a lower score to incentivise not overusing it:

1.  my score may be reduced by up to 5% if large amounts of text are from outside sources;
2.  my score may be reduced by up to 10% if large amounts of code come from outside sources;
3.  my score may be reduced further for code from outside sources, if I am not capable of broadly explaining the code in an office hour with the instructor:
    -   by up to 10% if I highlight in comments that I do not fully understand the code;
    -   by up to 20% if I fail to highlight in comments that I do not fully understand the code.

Finally, for code that I claim as coming from me - all code not labeled as coming from outside sources - I am expected to be able to *properly* explain it in an office hour with the instructor. Failure to do so leads to a reduction of **at least 30%**, but possibly more - even if the code in question constitutes only a small part of the assignment counting for much less than 30%.

**Note:** The new grading rubric tries to strike a balance between (i) the **transparent** use of outside sources to avoid you getting stuck (which is frustrating and potentially unproductive), and (ii) rewarding understanding and your own work. Thus a report that relies heavily on, say, ChatGPT with output you don't fully understand can still get you 80/100, but not more; while reports that have only one-liners generated by ChatGPT or help by others can score 100/100. A failure to acknowledge outside sources alongside a failure to understand the code will lead to much lower scores.

# Instructions (remove for final submission)

This file is a template for your third data report. As for previous reports, delete the **Notes** for your final submission.

**Note:** Do not include the code in the rendered document.

**Note:** Final page limit (excluding 'Disclaimer') is 6 pages -- not 10 like last time. This is since you should no longer include the code.

**Note:** Here is a (non-exhaustive) list of points to keep in mind to avoid losing points:

-   Round numbers sensibly: `1.23` not `1.234567`
-   Mention/explain/comment in the code what you are loading extra packages for.
-   You have to comment your code (ChatGPT can obviously do it)
-   The clean data and everything included in the rendered report should have sensible labels. Headers such as `qn` and `ans` are not good.
-   Clean formating:
    -   For tables, all the data for a row should be in a single row, i.e. the columns should fit next to each other on the page. If not, it's too wide.
    -   Check your markdown formatting: writing `#Header` will not lead to a header, but look like #Header.
    -   Including tibbles in the output (if columns labeled properly) is fine; including a number or vector as `[1] 0` looks garbage, don't do it.
-   Comment non-obvious code by at least one line of intent, either in the report (if it is about why you do it) or as a comment in the code (if it is about how the code achieves it).
    -   This applies especially to functions, longer pipes of summaries.
    -   You do not have to explain how standard plots (similar to those we did) work.

# Dataset

```{r load-libraries}
#| output: false
#| echo: false
library(tidyverse)
```

**Source**: We use the dataset from a survey run by Kaufmann, Andre, and Kőszegi.

**Note:** For background on the survey, read Section 6 of [the paper](https://trichotomy.xyz/publication/understanding-markets-with-srcs/understanding-markets-with-SRCs.pdf). You may want to skim the instructions of the survey in the Appendix to figure out what the questions were about. The codebook describes the fields.

**Note:** To load the data, you have to install the package `haven` which provides the function `read_sav`.

**Note:** You do not want to document all fields, but describe those you need for your analysis later on and mention where to find more information. While you should try to figure out what the data is about (that's part of your job), realize that `vig` is the Scenario — such as meat consumption, flights, or electricity — that a person was asked about; `effect` is the main outcome for beliefs about dampening (read text to find out what that broadly means); and `wtp_1` and `wtp_2` are the willingness to pay in the effective or ineffective situations, providing a measure of social concerns.

**Note:** In your own words, describe what the survey asks participants — that is, what are 'dampening' beliefs about, and what are the moral preferences about? This is to check that you understand what the data is about, so that you can do the exploration task.

**Documentation:**

# Cleaning

**Note:** The data contains many items that are of type `<dbl+lbl>`. You should transform these into factors - any of `as.factor` or `factor` work. Make sure to test that it works and that you know how to filter on these values. See [the chapter on Factors](https://r4ds.hadley.nz/factors.html) to learn more.

**Note:** Write your cleaned data to a new file, either in csv or rds format.

# Exploration

1.  Replicate the two figures `fig_beliefs.pdf` and `fig_conseq.pdf` in this folder:
    -   You do not need to get the colors right or have all the labeling and theme the same. I do expect the same plot though — same bars, same numbers — and to have a legend that explains what is what, and to include the percentage numbers. So in short, the same figures, but less snazzy and polished is fine. (More points the snazzier though.)
    -   Look at `geom_text` for placing the text based on data (e.g. based on height of bars).
    -   Do not try to do everything in a single call: create new columns in the dataframe where you store quantities you need for plotting.
    -   Do not include your code for the figures in the rendered report here - include the code for one of the figures at the end when you explain the code.
2.  The dataset contains a variety of demographic information on the survey participants. Moreover, participants are only asked about one scenario for their dampening beliefs and one for their social concerns. In this part, explore how the scenario and the background of the survey participants affect their answers to **one of these two (not both)**:
    -   Their dampening beliefs: that is, their answer to `effect`
    -   Their social concerns: that is, their answers to `wtp_1` and `wtp_2`, including the difference between these two values.

# Conclusions

**Note:** Briefly explain anything you learned from you exploration based on background information, that is part 2 of the main part.

# Code Explanation

Explain how the code for one of the figures works (ignoring choice of fonts, colors that are not determined by the data, etc). Thus, include the code here, then describe what it does.

:::